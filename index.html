<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Space Invaders</title>
    <style>
    	* { padding: 0; margin: 0; }
    	canvas { background: #eee; display: block; margin: 0 auto; }
    </style>
  </head>
  <body>

    <canvas id="myCanvas" width="640" height="480"></canvas>
    <script src="javascript.js"></script>
    <script type="text/javascript">

      // To render graphics on the <canvas> element, first we have to grab a reference to it in JavaScript.
      var canvas = document.getElementById("myCanvas");
      var ctx = canvas.getContext("2d");
      var playerSpeed=2;
      var projSpeed=2;

      // Key Booleans
      var moveLeft = false;
      var moveRight = false;
      var spaceBtn = false;

      // Keyboard Controls - uses boolean to smooth our movements
      document.onkeydown = function(evt){
        if (evt.keyCode === 37)
          moveLeft = true;
        else if (evt.keyCode === 39)
          moveRight = true;
        else if (evt.keyCode === 32){
          spaceBtn = true;
        }
      }
      document.onkeyup = function(evt){
        if (evt.keyCode === 37)
          moveLeft = false;
        else if (evt.keyCode === 39)
          moveRight = false;
        else if (evt.keyCode === 32)
          spaceBtn = false;
      }

      var player = new Player();
      var bullet = [];
      // var bullet = new Bullet(player.px, player.py, player.w);

      // Main canvas function
      var main = function(){
        // Clears canvas before drawing.
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Moves player
        player.update();

        bullet.forEach(function(item,index){
          // Checks if bullet is active, else deletes it.
          if (item.active)
            item.update();
          else
            bullet.splice(index,1);
        });



        // Draws objects
        player.draw();

        for (var i = 0; i < bullet.length; i++){
          bullet[i].draw();
        }
        // drawRect(px,py,50,50,"#FF0000");
        // drawArc(px+25,py-22+projSpeed,20,0,Math.PI*2, false, "blue");
      }

      // Runs draw function every x milliseconds, aka FrameRate
      setInterval(main,10);


    </script>

  </body>
</html>
