<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Space Invaders</title>
    <style>
    	* { padding: 0; margin: 0; }
    	canvas { background: #eee; display: block; margin: 0 auto; }
    </style>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  </head>
  <body>
    <h1 style="text-align:center">SPACE INVADERS</h1>
    <canvas id="myCanvas" width="640" height="480" style="display:block; margin:auto;"></canvas>
    <br>
    <p style="text-align:center">Press spacebar to shoot! Use left and right arrow keys to move! Enjoy!</p>
    <script src="javascript.js"></script>
    <script type="text/javascript">

      // To render graphics on the <canvas> element, first we have to grab a reference to it in JavaScript.
      var canvas = document.getElementById("myCanvas");
      var ctx = canvas.getContext("2d");

      // Key Control Boolean variables
      var moveLeft = false;
      var moveRight = false;
      var spaceBtn = false;

      // Keyboard Controls - uses boolean to smooth our movements
      document.onkeydown = function(evt){
        if (evt.keyCode === 37)
          moveLeft = true;
        else if (evt.keyCode === 39)
          moveRight = true;
      }
      document.onkeyup = function(evt){
        if (evt.keyCode === 37)
          moveLeft = false;
        else if (evt.keyCode === 39)
          moveRight = false;
        else if (evt.keyCode === 32)
          spaceBtn = true;
      }

      // Initalizing instances
      var player = new Player();
      var bullet = [];

      // Main canvas function
      var main = function(){
        // Clears canvas before drawing.
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Black Canvas background
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Moves player
        player.update();
        bullet.forEach(function(item,index){
          // Checks if bullet is active, else deletes it.
          if (item.active)
            item.update();
          else
            bullet.splice(index,1);
        });

        // Draws objects
        player.draw();
        bullet.forEach(function(item){
          item.draw();
        });

      }

      // Runs draw function every x milliseconds, aka FrameRate
      setInterval(main,10);


    </script>

  </body>
</html>
